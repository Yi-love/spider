(function(t,e){if(typeof define==="function"&&define.amd){define([],e)}else if(typeof exports==="object"){module.exports=e()}else{t.Spider=e()}})(this,function(){function t(t,e,i){this.context=t;this.svgns=e?e:t.namespaceURI;this.childrens={};this.current=0;this.preName=!!i?i:"insect_";this.spiderName=this.random()}t.random=function(){var t=0,e="spider_svg_";return function(){return e+t++ +"_"+ +new Date}};t.prototype={use:function(t){return this.childrens[t]},random:t.random(),def:function(t,i,n){if(arguments.length===1&&!!t&&this.isType(t,"string")){i=t;t=this.gName()}else if(arguments.length===2&&this.isType(i,"boolean")){n=i;i=t;t=this.gName()}if(typeof t==="object"){i=t;t=this.gName();this.childrens[t]=new e(i,t)}else if(!!t&&this.isType(t,"string")){i=this.isInsect(i)?i.gInsect():i;this.childrens[t]=new e(typeof i==="object"?i:this.cElement(i),t)}else{throw new Error("Spider init error")}if(n){this.add(t)}return this.use(t)},gName:function(){return this.preName+this.current++},add:function(t){if(typeof t==="object"){this.append(t)}else if(!!t&&this.isType(t,"string")){this.append(this.childrens[t])}else if(this.isType(t,"array")){for(var e=0;e<t.length;e++){this.append(t[e])}}return this},pop:function(t){var e=null;if(!t){return e}if(this.isInsect(t)){t=t.gName()}e=this.use(t);this.remove(t);return e},destory:function(t){this.pop(t);return this},remove:function(t){this.context.removeChild(this.childrens[t].gInsect());delete this.childrens[t];return this},append:function(t){if(this.isInsect(t)){if(!this.childrens[t.gName()]){t=this.def(t.gName(),t.gInsect())}this.context.appendChild(t.gInsect())}else{this.context.appendChild(t)}return this},cElement:function(t){return window.document.createElementNS(this.svgns,t)}};function e(t,e){this.insect=t;this.insectName=e;this.attr({insect:e})}e.prototype={attr:function(t,e){if(this.isType(t,"function")){t=t()}if(this.isType(e,"function")){e=e()}if(arguments.length===1){if(this.isType(t,"string")){return!!t?this.gInsect().getAttribute(t):null}for(var i in t){if(t[i]){this.gInsect().setAttribute(i,t[i])}}}else if(arguments.length===2&&this.isType(t,"string")&&this.isType(e,"string")){this.gInsect().setAttribute(t,e)}return this},isType:function(t,e){e=e.substring(0,1).toUpperCase()+e.substr(1);return{}.toString.call(t)==="[object "+e+"]"?true:false},gInsect:function(){return this.insect},gName:function(){return this.insectName},isInsect:function(t){return t instanceof e},add:function(t){if(this.isType(t,"array")){for(var e=0;e<t.length;e++){this.append(t[e])}}else if(typeof t==="object"){this.append(t)}return this},text:function(t){if(this.gInsect().textContent!==void 0&&!!t&&this.isType(t,"string")){this.gInsect().textContent=t}return this},remove:function(t){this.gInsect().removeChild(t);return this},append:function(t){if(this.isInsect(t)){this.gInsect().appendChild(t.gInsect())}else{this.gInsect().appendChild(t)}return this}};t.prototype.isType=e.prototype.isType;t.prototype.isInsect=e.prototype.isInsect;return t});